<section class="my-5">
    <h2>Création de compte</h2>
    <form id="form" [formGroup]="accountForm" (ngSubmit)="onSubmit()">
        <div class="form-group row">
            <div class="form-group col">
                <label for="name">Nom : </label>
                <input type="text" class="form-control" id="lastName" formControlName="lastName" [appShowValidationErrors]="accountForm.get('lastName')">

                <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="alert alert-danger my-3">
                    <div *ngIf="lastName.errors.required">Veuillez renseigner votre nom.</div>
                    <div *ngIf="lastName.errors.number">Votre nom ne peut pas contenir de chiffre.</div>
                </div>
            </div>
            <div class="form-group col">
                <label for="firstname">Prénom : </label>
                <input type="text" class="form-control" id="firstname" formControlName="firstName" [appShowValidationErrors]="accountForm.get('firstName')">

                <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="alert alert-danger my-3">
                    <div *ngIf="firstName.errors.required">Veuillez renseigner votre prénom.</div>
                    <div *ngIf="firstName.errors.number">Votre prénom ne peut pas contenir de chiffre.</div>
                </div>
            </div>
        </div>
        <div class="form-group row ">
            <div class="col">
                <label for="civility">Civilité : </label>
            </div>
            <div class="form-check form-check-inline col" *ngFor="let gender of genders">
                <input class="form-check-input" type="radio" name="civility" id="{{gender}}" value="{{gender}}" formControlName="civility">
                <label class="form-check-label" for="{{gender}}">{{gender}}</label>
            </div>                        
        </div>
        <div class="form-group row">
            <div class="form-group col-md-9">
                <label for="address">Adresse : </label>
                <input type="text" class="form-control" id="address" formControlName="street" [appShowValidationErrors]="accountForm.get('street')">

                <div *ngIf="street.invalid && (street.dirty || street.touched)" class="alert alert-danger my-3">
                    <div *ngIf="street.errors.required">Veuillez renseigner votre adresse.</div>
                </div>
            </div>
            <div class="form-group col-md-3">
                <label for="postal">Code postal :</label>
                <input type="text" class="form-control" id="postal" formControlName="zipCode" [appShowValidationErrors]="accountForm.get('zipCode')">

                <div *ngIf="zipCode.invalid && (zipCode.dirty || zipCode.touched)" class="alert alert-danger my-3">
                    <div *ngIf="zipCode.errors.required">Veuillez renseigner votre code postal.</div>
                    <div *ngIf="!zipCode.errors.required && zipCode.errors.zipcode">Le code postal est invalide.</div>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="city">Ville : </label>
            <input type="text" class="form-control" id="city" formControlName="city" [appShowValidationErrors]="accountForm.get('city')">

            <div *ngIf="city.invalid && (city.dirty || city.touched)" class="alert alert-danger my-3">
                <div *ngIf="city.errors.required">Veuillez renseigner votre ville de résidence.</div>
                <div *ngIf="city.errors.number">Le nom de la ville ne peut pas contenir de chiffre.</div>
            </div>
        </div>
        <div class="form-group">
            <label for="country">Pays : </label>
            <input type="text" class="form-control" id="country" formControlName="country" [appShowValidationErrors]="accountForm.get('country')">

            <div *ngIf="country.invalid && (country.dirty || country.touched)" class="alert alert-danger my-3">
                <div *ngIf="country.errors.required">Veuillez renseigner votre pays de résidence.</div>
                <div *ngIf="country.errors.number">Le nom du pays ne peut pas contenir de chiffre.</div>
            </div>
        </div>
        <div class="form-group">
            <label for="tel">Téléphone : </label>
            <input type="tel" class="form-control" id="tel" formControlName="phone" [value]="accountForm.get('phone').value | phonenumber" [appShowValidationErrors]="accountForm.get('phone')">

            <div *ngIf="phone.invalid && (phone.dirty || phone.touched)" class="alert alert-danger my-3">
                <div *ngIf="phone.errors.required">Veuillez renseigner votre numéro de téléphone.</div>
                <div *ngIf="!phone.errors.required && phone.errors.phoneinvalid">Le numéro de téléphone est invalide !</div>
            </div>
        </div>
        <div class="form-group">
            <label for="mail">Email : </label>
            <input type="email" class="form-control" id="mail" aria-describedby="mailHelp" formControlName="email" [appShowValidationErrors]="accountForm.get('email')">
            <small id="mailHelp" class="form-text text-muted">Nous ne divulgerons pas votre adresse email à un tier.</small>

            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger my-3">
                <div *ngIf="email.errors.required">Veuillez renseigner votre adresse email.</div>
                <div *ngIf="email.errors.email">Le format ne correspond pas à une adresse email.</div>
            </div>
        </div>
        <div class="form-group">
            <label for="login">Identifiant : </label>
            <input type="text" class="form-control" id="login" formControlName="login" [appShowValidationErrors]="accountForm.get('login')">
            <small id="loginHelp" class="form-text text-muted">L'identifiant doit contenir au moins 6 caractères.</small>

            <div *ngIf="login.invalid && (login.dirty || login.touched)" class="alert alert-danger my-3">
                <div *ngIf="login.errors.required">Veuillez renseigner votre identifiant.</div>
                <div *ngIf="login.errors.minlength">L'identifiant doit contenir au moins 6 caractères !</div>
            </div>
        </div>
        <div class="form-group row">
            <div class="form-group col">
                <label for="password">Mot de passe : </label>
                <input type="password" class="form-control" id="password" formControlName="password" [appShowValidationErrors]="accountForm.get('password')">
                <small id="mailHelp" class="form-text text-muted">Le mot de passe doit contenir au moins 8 caractères.</small>

                <div *ngIf="password.invalid && (password.dirty || password.touched)" class="alert alert-danger my-3">
                    <div *ngIf="password.errors.required">Veuillez renseigner votre mot de passe.</div>
                    <div *ngIf="password.errors.minlength">Le mot de passe doit contenir au moins 8 caractères !</div>
                    <div *ngIf="password.errors.fieldnotmatching">Les 2 mots de passe ne sont pas équivalents !</div>
                </div>
            </div>
            <div class="form-group col">
                <label for="pass-confirmation">Confirmation du mot de passe : </label>
                <input type="password" class="form-control" id="pass-confirmation" formControlName="passwordConfirmation" [appFieldMatch]="accountForm.get('password').value" [field]="accountForm.get('passwordConfirmation')" [appShowValidationErrors]="accountForm.get('passwordConfirmation')">
                <small id="passwordConfirmationHelp" class="form-text text-muted">Veuillez entrer votre mot de passe à nouveau.</small>

                <div *ngIf="passwordConfirmation.invalid && (passwordConfirmation.dirty || passwordConfirmation.touched)" class="alert alert-danger my-3">
                    <div *ngIf="passwordConfirmation.errors.required">Veuillez renseigner votre mot de passe.</div>
                    <div *ngIf="passwordConfirmation.errors.fieldnotmatching">Les 2 mots de passe ne sont pas équivalents !</div>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-primary center">Valider</button>
        <div *ngIf="accountForm.invalid" class="alert alert-primary my-3">
            Veuillez compléter le formulaire s'il vous plait.
        </div>
    </form>
</section>